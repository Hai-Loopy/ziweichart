<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ziwei Doushu Birth Chart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #ffffff;
            margin: 0;
            padding: 20px;
            color: #000000;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background-color: #ffffff;
            border: 2px solid #000000;
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 2px solid #000000;
            padding-bottom: 10px;
        }
        
        .header h1 {
            color: #000000;
            font-size: 28px;
            margin-bottom: 5px;
        }
        
        .header p {
            margin: 5px 0;
            font-size: 16px;
        }
        
        .chart {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .palace {
            border: 2px solid #000000;
            padding: 10px;
            min-height: 140px;
            position: relative;
            background-color: #ffffff;
        }
        
        .palace-title {
            text-align: center;
            color: #000000;
            font-weight: bold;
            padding: 4px;
            border-bottom: 1px solid #000000;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .palace-content {
            font-size: 14px;
            line-height: 1.5;
        }
        
        .major-star {
            color: #ff0000;
            font-weight: bold;
            margin: 2px 0;
        }
        
        .minor-star {
            color: #000000;
            margin: 2px 0;
        }
        
        .palace-number {
            position: absolute;
            top: 2px;
            right: 5px;
            font-size: 12px;
            color: #000000;
        }
        
        .chart-info {
            margin-top: 20px;
            padding: 15px;
            border: 1px solid #000000;
            background-color: #ffffff;
            border-radius: 5px;
        }
        
        .info-section {
            margin-bottom: 15px;
        }
        
        .info-title {
            color: #000000;
            font-weight: bold;
            margin-bottom: 5px;
            border-bottom:.5px solid #000000;
            padding-bottom: 2px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        
        table, th, td {
            border: 1px solid #000000;
        }
        
        th, td {
            padding: 8px;
            text-align: left;
        }
        
        th {
            background-color: #f5f5f5;
            color: #000000;
        }
        
        .twelve-palaces {
            margin-top: 20px;
            font-size: 14px;
        }
        
        .twelve-palaces h3 {
            color: #000000;
        }
        
        .explanation-row {
            display: flex;
            flex-wrap: wrap;
        }
        
        .explanation-item {
            width: 25%;
            padding: 5px;
            box-sizing: border-box;
        }
        
        @media (max-width: 768px) {
            .chart {
                grid-template-columns: repeat(2, 1fr);
                grid-template-rows: repeat(8, 1fr);
            }
            
            .explanation-item {
                width: 50%;
            }
        }
        
        @media (max-width: 480px) {
            .explanation-item {
                width: 100%;
            }
        }
        
        .destiny-pillars {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
        }
        
        .pillar {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 60px;
        }
        
        .pillar-box {
            border: 1px solid #000000;
            width: 100%;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2px 0;
            background-color: #ffffff;
        }
        
        .pillar-label {
            font-size: 12px;
            color: #000000;
            text-align: center;
        }
        
        .center-cell {
            grid-column: 2 / span 2;
            grid-row: 2 / span 2;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background-color: #f5f5f5;
            border: 2px solid #000000;
        }
        
        .center-title {
            font-size: 18px;
            font-weight: bold;
            color: #000000;
            margin-bottom: 10px;
        }
        
        .center-content {
            font-size: 14px;
            line-height: 1.6;
        }
        
        .main-star-name {
            color: #ff0000;
            font-weight: bold;
        }
        
        .back-button {
            display: block;
            background-color: #4a2882;
            color: white;
            text-align: center;
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            margin: 20px auto;
            width: 200px;
            font-weight: bold;
        }
        
        .back-button:hover {
            background-color: #3a1f6e;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ziwei Doushu Birth Chart</h1>
            <p>Purple Star Astrology Chart</p>
            <p id="birth-info">Gender: Male | Date of Birth: February 26, 2025 | Time: 12:00 (Horse Hour)</p>
            
            <div class="destiny-pillars">
                <div class="pillar">
                    <div class="pillar-label">Year</div>
                    <div class="pillar-box">己</div>
                    <div class="pillar-box">巳</div>
                </div>
                <div class="pillar">
                    <div class="pillar-label">Month</div>
                    <div class="pillar-box">甲</div>
                    <div class="pillar-box">寅</div>
                </div>
                <div class="pillar">
                    <div class="pillar-label">Day</div>
                    <div class="pillar-box">丙</div>
                    <div class="pillar-box">午</div>
                </div>
                <div class="pillar">
                    <div class="pillar-label">Hour</div>
                    <div class="pillar-box">丁</div>
                    <div class="pillar-box">未</div>
                </div>
            </div>
        </div>
        
        <div class="chart">
            <!-- Palace 1: Life Palace -->
            <div class="palace">
                <div class="palace-number">1</div>
                <div class="palace-title">Life Palace</div>
                <div class="palace-content">
                    <div class="major-star">紫微 (Ziwei)</div>
                    <div class="major-star">天機 (Tianji)</div>
                    <div class="minor-star">左輔 (Zuofu)</div>
                    <div class="minor-star">文昌 (Wenchang)</div>
                </div>
            </div>
            
            <!-- Palace 2: Parents Palace -->
            <div class="palace">
                <div class="palace-number">2</div>
                <div class="palace-title">Parents Palace</div>
                <div class="palace-content">
                    <div class="major-star">破軍 (Pojun)</div>
                    <div class="minor-star">火星 (Huoxing)</div>
                </div>
            </div>
            
            <!-- Palace 3: Fortune Palace -->
            <div class="palace">
                <div class="palace-number">3</div>
                <div class="palace-title">Fortune Palace</div>
                <div class="palace-content">
                    <div class="major-star">武曲 (Wuqu)</div>
                    <div class="minor-star">地劫 (Dijie)</div>
                </div>
            </div>
            
            <!-- Palace 4: Property Palace -->
            <div class="palace">
                <div class="palace-number">4</div>
                <div class="palace-title">Property Palace</div>
                <div class="palace-content">
                    <div class="major-star">太陰 (Taiyin)</div>
                    <div class="minor-star">祿存 (Lucun)</div>
                </div>
            </div>
            
            <!-- Palace 5: Career Palace -->
            <div class="palace">
                <div class="palace-number">5</div>
                <div class="palace-title">Career Palace</div>
                <div class="palace-content">
                    <div class="major-star">天同 (Tiantong)</div>
                    <div class="minor-star">右弼 (Youbi)</div>
                </div>
            </div>
            
            <!-- Center Cell -->
            <div class="center-cell">
                <div class="center-title">Main Life Star</div>
                <div class="center-content">
                    <p><span class="main-star-name">Ziwei Star</span></p>
                    <p>Element: Water (Level 2)</p>
                    <p id="birth-year">Year: Yi-Si</p>
                    <p id="gender-display">Gender: Male</p>
                </div>
            </div>
            
            <!-- Palace 6: Friends Palace -->
            <div class="palace">
                <div class="palace-number">6</div>
                <div class="palace-title">Friends Palace</div>
                <div class="palace-content">
                    <div class="major-star">廉貞 (Lianzhen)</div>
                    <div class="minor-star">天馬 (Tianma)</div>
                </div>
            </div>
            
            <!-- Palace 7: Travel Palace -->
            <div class="palace">
                <div class="palace-number">7</div>
                <div class="palace-title">Travel Palace</div>
                <div class="palace-content">
                    <div class="major-star">天府 (Tianfu)</div>
                    <div class="minor-star">地空 (Dikong)</div>
                </div>
            </div>
            
            <!-- Palace 8: Health Palace -->
            <div class="palace">
                <div class="palace-number">8</div>
                <div class="palace-title">Health Palace</div>
                <div class="palace-content">
                    <div class="major-star">貪狼 (Tanlang)</div>
                </div>
            </div>
            
            <!-- Palace 9: Wealth Palace -->
            <div class="palace">
                <div class="palace-number">9</div>
                <div class="palace-title">Wealth Palace</div>
                <div class="palace-content">
                    <div class="major-star">巨門 (Jumen)</div>
                    <div class="minor-star">文曲 (Wenqu)</div>
                </div>
            </div>
            
            <!-- Palace 10: Children Palace -->
            <div class="palace">
                <div class="palace-number">10</div>
                <div class="palace-title">Children Palace</div>
                <div class="palace-content">
                    <div class="major-star">太陽 (Taiyang)</div>
                </div>
            </div>
            
            <!-- Palace 11: Marriage Palace -->
            <div class="palace">
                <div class="palace-number">11</div>
                <div class="palace-title">Marriage Palace</div>
                <div class="palace-content">
                    <div class="major-star">七殺 (Qisha)</div>
                    <div class="minor-star">鈴星 (Lingxing)</div>
                </div>
            </div>
            
            <!-- Palace 12: Siblings Palace -->
            <div class="palace">
                <div class="palace-number">12</div>
                <div class="palace-title">Siblings Palace</div>
                <div class="palace-content">
                    <div class="major-star">天梁 (Tianliang)</div>
                </div>
            </div>
            
            <!-- Palace 13: Happiness Palace -->
            <div class="palace">
                <div class="palace-number">13</div>
                <div class="palace-title">Happiness Palace</div>
                <div class="palace-content">
                    <div class="major-star">天相 (Tianxiang)</div>
                    <div class="minor-star">天魁 (Tiankui)</div>
                </div>
            </div>
            
            <!-- Palace 14: Spirit Palace -->
            <div class="palace">
                <div class="palace-number">14</div>
                <div class="palace-title">Spirit Palace</div>
                <div class="palace-content">
                    <div class="minor-star">天鉞 (Tianyue)</div>
                    <div class="minor-star">陀羅 (Tuoluo)</div>
                </div>
            </div>
            
            <!-- Palace 15: Body Palace -->
            <div class="palace">
                <div class="palace-number">15</div>
                <div class="palace-title">Body Palace</div>
                <div class="palace-content">
                    <div class="minor-star">天刑 (Tianxing)</div>
                    <div class="minor-star">天姚 (Tianyao)</div>
                </div>
            </div>
            
            <!-- Palace 16: Karma Palace -->
            <div class="palace">
                <div class="palace-number">16</div>
                <div class="palace-title">Karma Palace</div>
                <div class="palace-content">
                    <div class="minor-star">台輔 (Taifu)</div>
                    <div class="minor-star">封誥 (Fenggao)</div>
                </div>
            </div>
        </div>
        
        <div class="chart-info">
            <div class="info-section">
                <div class="info-title">Basic Information</div>
                <table>
                    <tr>
                        <th>Gender</th>
                        <td id="gender-cell">Male</td>
                        <th>Birth Date</th>
                        <td id="birth-date-cell">February 26, 2025</td>
                    </tr>
                    <tr>
                        <th>Birth Hour</th>
                        <td id="birth-hour-cell">Horse Hour (11:00-13:00)</td>
                        <th>Life Master</th>
                        <td><span class="main-star-name">Ziwei Star</span></td>
                    </tr>
                    <tr>
                        <th>Body Master</th>
                        <td><span class="main-star-name">Tianji Star</span></td>
                        <th>Five Elements</th>
                        <td>Water Element, Level 2</td>
                    </tr>
                </table>
                <div id="additional-info"></div>
            </div>
            
            <div class="info-section">
                <div class="info-title">Chart Analysis</div>
                <p>This chart shows the <span class="main-star-name">Ziwei Star</span> in the Life Palace, together with <span class="main-star-name">Tianji</span>, which is considered an excellent destiny. Ziwei represents nobility, while Tianji represents intelligence. The two stars together indicate a person with exceptional intelligence and strong leadership abilities.</p>
                <p>The presence of Zuofu and Wenchang in the Life Palace further enhances the native's scholarly talents and literary abilities. These stars suggest the person will receive help from benefactors throughout life and generally experience smooth progress.</p>
                <p>The <span class="main-star-name">Taiyang (Sun)</span> in the Children Palace indicates bright and talented children who will bring honor to the family.</p>
                <p>The <span class="main-star-name">Qisha (Seven Killings)</span> in the Marriage Palace, together with Lingxing, suggests that marriage may experience ups and downs. The person should pay attention to communication and understanding in relationships.</p>
            </div>
        </div>
        
        <div class="twelve-palaces">
            <h3>Palace Explanations</h3>
            <div class="explanation-row">
                <div class="explanation-item">
                    <strong>Life Palace</strong>: Represents personality, appearance, and talents
                </div>
                <div class="explanation-item">
                    <strong>Siblings Palace</strong>: Represents siblings and friendship relationships
                </div>
                <div class="explanation-item">
                    <strong>Marriage Palace</strong>: Represents marriage, partnerships, and cooperation
                </div>
                <div class="explanation-item">
                    <strong>Children Palace</strong>: Represents children, creativity, and joyful events
                </div>
            </div>
            <div class="explanation-row">
                <div class="explanation-item">
                    <strong>Wealth Palace</strong>: Represents wealth, income, and resources
                </div>
                <div class="explanation-item">
                    <strong>Health Palace</strong>: Represents health, difficulties, and challenges
                </div>
                <div class="explanation-item">
                    <strong>Travel Palace</strong>: Represents travel, relocation, and change
                </div>
                <div class="explanation-item">
                    <strong>Friends Palace</strong>: Represents friendships, social relationships, and networking
                </div>
            </div>
            <div class="explanation-row">
                <div class="explanation-item">
                    <strong>Career Palace</strong>: Represents career, achievements, and status
                </div>
                <div class="explanation-item">
                    <strong>Property Palace</strong>: Represents real estate, residences, and land
                </div>
                <div class="explanation-item">
                    <strong>Happiness Palace</strong>: Represents mental well-being, blessings, and leisure
                </div>
                <div class="explanation-item">
                    <strong>Parents Palace</strong>: Represents parents, elders, and authority figures
                </div>
            </div>
            <div class="explanation-row">
                <div class="explanation-item">
                    <strong>Spirit Palace</strong>: Represents spirituality, intuition, and the subconscious
                </div>
                <div class="explanation-item">
                    <strong>Body Palace</strong>: Represents physical constitution and health conditions
                </div>
                <div class="explanation-item">
                    <strong>Karma Palace</strong>: Represents blessings, spiritual life, and karma
                </div>
                <div class="explanation-item">
                    <strong>Center</strong>: Core chart information
                </div>
            </div>
        </div>
        
        <a href="index.html" class="back-button">← Return to Calculator</a>
    </div>

    <script>
        // Basic function to update the display with URL parameters if they exist
        document.addEventListener('DOMContentLoaded', function() {
            // Get URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            
            // Check if we have any parameters
            if (urlParams.has('name')) {
                const name = decodeURIComponent(urlParams.get('name'));
                const gender = urlParams.get('gender') || 'Male';
                const birthDate = urlParams.get('birthDate') || '2025-02-26';
                const birthHour = urlParams.get('birthHour') || '12';
                const birthMinute = urlParams.get('birthMinute') || '0';
                const chineseHour = urlParams.get('chineseHour') || '7';
                
                // Format the date nicely for display
                let formattedDate = birthDate;
                try {
                    // Try to parse the date into a readable format
                    const dateParts = birthDate.split('-');
                    if (dateParts.length === 3) {
                        const year = dateParts[0];
                        const month = parseInt(dateParts[1]);
                        const day = parseInt(dateParts[2]);
                        
                        const months = [
                            'January', 'February', 'March', 'April', 'May', 'June',
                            'July', 'August', 'September', 'October', 'November', 'December'
                        ];
                        
                        formattedDate = `${months[month-1]} ${day}, ${year}`;
                    }
                } catch (e) {
                    console.log('Error formatting date:', e);
                    // Fall back to original format if there's an error
                    formattedDate = birthDate;
                }
                
                // Format time with leading zeros
                const formattedHour = String(birthHour).padStart(2, '0');
                const formattedMinute = String(birthMinute).padStart(2, '0');
                const timeDisplay = `${formattedHour}:${formattedMinute}`;
                
                // Update page title and header
                if (name && name !== 'User') {
                    document.title = `${name}'s Ziwei Doushu Birth Chart`;
                    document.querySelector('.header h1').textContent = `${name}'s Ziwei Doushu Birth Chart`;
                }
                
                // Update birth info
                const hourName = getChineseHourName(chineseHour);
                document.getElementById('birth-info').textContent = 
                    `Gender: ${gender} | Date of Birth: ${formattedDate} | Time: ${timeDisplay} (${hourName})`;
                
                // Update gender in center cell
                document.getElementById('gender-display').textContent = `Gender: ${gender}`;
                
                // Update table cells
                document.getElementById('gender-cell').textContent = gender;
                document.getElementById('birth-date-cell').textContent = formattedDate;
                document.getElementById('birth-hour-cell').textContent = `${hourName}`;
                
                // Add location and timezone if provided
                if (urlParams.has('birthLocation') || urlParams.has('timezone')) {
                    const location = decodeURIComponent(urlParams.get('birthLocation') || '');
                    const timezone = decodeURIComponent(urlParams.get('timezone') || '');
                    
                    const additionalInfo = document.getElementById('additional-info');
                    if (additionalInfo) {
                        let infoText = '';
                        if (location) infoText += `Birth Location: ${location}`;
                        if (location && timezone) infoText += ' | ';
                        if (timezone) infoText += `Time Zone: ${timezone}`;
                        
                        if (infoText) {
                            additionalInfo.innerHTML = `<p>${infoText}</p>`;
                        }
                    }
                }
            }
        });
        
        // Helper function to get Chinese hour name
        function getChineseHourName(hourNumber) {
            const hours = [
                '',
                'Rat Hour (23:00-01:00)',
                'Ox Hour (01:00-03:00)',
                'Tiger Hour (03:00-05:00)',
                'Rabbit Hour (05:00-07:00)',
                'Dragon Hour (07:00-09:00)',
                'Snake Hour (09:00-11:00)',
                'Horse Hour (11:00-13:00)',
                'Goat Hour (13:00-15:00)',
                'Monkey Hour (15:00-17:00)',
                'Rooster Hour (17:00-19:00)',
                'Dog Hour (19:00-21:00)',
                'Pig Hour (21:00-23:00)'
            ];
            
            return hours[parseInt(hourNumber)] || 'Unknown Hour';
        }
    </script>
</body>
</html>
